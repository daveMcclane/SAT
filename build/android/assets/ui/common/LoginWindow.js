function LoginWindow(){function e(e){if(0!=e.error)return d.borderColor="#FC959D",p.borderColor="#FC959D",u.top="3px",u.height=Titanium.UI.SIZE,void(u.text="Usuario o clave incorrecta.");Ti.App.Properties.setString("idUsuario",e.id_usuario),Ti.App.Properties.setString("nombre",e.nombre),Ti.App.Properties.setString("apellido",e.apellido),Ti.App.Properties.setString("rut",e.rut),Ti.App.Properties.setString("clave",e.clave),Ti.App.Properties.setString("email",e.email),Ti.App.Properties.setString("fecha",e.fechaNacimiento),Ti.App.Properties.setString("altura",e.altura),Ti.App.Properties.setString("peso",e.peso),Ti.App.Properties.setString("idEquipo",e.id_equipo),Ti.App.Properties.setString("equipo",e.equipo),Ti.App.Properties.setString("tipo",e.tipo),Ti.App.Properties.setString("deporte",e.deporte),Ti.App.Properties.setString("login",!0);var t=require("ui/common/UserInterfaceWindow");(new t).open(),r.close()}var t=require("lib/FunctionsApp"),i=require("lib/Network"),r=Ti.UI.createWindow({backgroundColor:"#F1F1F1",title:"Login"}),o=Ti.UI.createView({top:"0%",width:"100%",height:"40%",backgroundColor:"#69FCFF",layout:"vertical"}),n=Ti.UI.createView({top:"40%",width:"100%",height:"60%",layout:"vertical"}),a=Ti.UI.createLabel({top:"50%",width:"100%",height:Titanium.UI.SIZE,font:{fontSize:50,fontWeight:"bold"},text:"SAT",color:"#3D5152",textAlign:Titanium.UI.TEXT_ALIGNMENT_CENTER}),l=Ti.UI.createLabel({top:"3px",width:"100%",height:Titanium.UI.SIZE,font:{fontSize:14,fontWeight:"bold"},text:"Sports Analyst Tool",color:"#3D5152",textAlign:Titanium.UI.TEXT_ALIGNMENT_CENTER}),d=Ti.UI.createTextField({top:"60px",width:"70%",height:60,backgroundColor:"#FFF",color:"#666",textAlign:Titanium.UI.TEXT_ALIGNMENT_CENTER,borderWidth:2,borderColor:"#CCC",borderRadius:8,hintText:"RUT",hintTextColor:"#CCC",maxLength:10}),p=Ti.UI.createTextField({top:"25px",width:"70%",height:60,backgroundColor:"#FFF",color:"#666",textAlign:Titanium.UI.TEXT_ALIGNMENT_CENTER,borderWidth:2,borderColor:"#CCC",borderRadius:8,hintText:"CLAVE",passwordMask:!0,inputType:"password",hintTextColor:"#CCC"}),s=Ti.UI.createButton({top:"25px",width:"70%",height:60,borderRadius:8,title:"Ingresar"}),u=t.labelError(),T=t.loading();o.add(a),o.add(l),n.add(u),n.add(d),n.add(p),n.add(s),r.add(o),r.add(n),r.add(T);var c={BLOCKSIZE:20};return r.addEventListener("open",function(){r.activity.actionBar.hide(),u.top=0,u.height=0,u.text=""}),d.addEventListener("blur",function(){t.validaRUT(d.getValue())?(d.borderColor="#A1D490",u.top=0,u.height=0,u.text=""):(d.borderColor="#FC959D",u.top="3px",u.height=Titanium.UI.SIZE,u.text="Rut no valido")}),s.addEventListener("click",function(){c.RUT=d.getValue(),c.PASS=p.getValue(),t.validaRUT(d.getValue())?i.loadJSON(e,"Login",c,"POST",T):(d.borderColor="#FC959D",u.top="3px",u.height=Titanium.UI.SIZE,u.text="Rut no valido")}),r}module.exports=LoginWindow;